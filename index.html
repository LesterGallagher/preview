<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Silverfish</title>
    <link rel="stylesheet" href="https://picturepan2.github.io/devices.css/dist/devices.css">

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-firestore.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyBvJNyIrVHnY0eA3CLZS2-f5OgXKuBIbD4",
            authDomain: "sandboxed-4844f.firebaseapp.com",
            databaseURL: "https://sandboxed-4844f.firebaseio.com",
            projectId: "sandboxed-4844f",
            storageBucket: "sandboxed-4844f.appspot.com",
            messagingSenderId: "353517497694",
            appId: "1:353517497694:web:c744bb56783a0cbb"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>

    <style>
        .device {
            margin: auto;

        }

        .device-frame {}

        iframe {
            width: 100%;
            height: 100%;
            background-color: #f3f5f6;
        }

        a {
            display: block;
        }
    </style>
</head>

<body>

    <!-- <div class="device device-galaxy-s8 device-blue">
        <div class="device-frame">
            <iframe frameborder="0" src="./app.html"></iframe>
        </div>
        <div class="device-stripe"></div>
        <div class="device-header"></div>
        <div class="device-sensors"></div>
        <div class="device-btns"></div>
        <div class="device-power"></div>
    </div> -->

    <div id="test"></div>

    <form action="app.html">
        <div>
            <label>Thema kleur
                <input type="color" name="themeColor">
            </label>
        </div>
        <div>
            <label>Naam
                <input type="text" name="name">
            </label>
        </div>
        <div>
            <label>Menu items (comma afgebakend)
                <input type="text" name="items">
            </label>
        </div>
        <button type="submit">Open</button>
    </form>


    <script>
        firebase
            .firestore()
            .collection("apps")
            .onSnapshot(function (querySnapshot) {
                while (test.firstElementChild) {
                    test.removeChild(test.firstElementChild);
                }

                querySnapshot.forEach(function (doc) {
                    var _doc$data = doc.data(),
                        name = _doc$data.name,
                        themeColor = _doc$data.themeColor,
                        items = _doc$data.items;

                    var a = document.createElement("a");
                    a.href = "app.html?name="
                        .concat(encodeURIComponent(name), "&themeColor=")
                        .concat(encodeURIComponent(themeColor), "&items=")
                        .concat(encodeURIComponent(items));
                    a.textContent = "app.html?name="
                        .concat(name, "&themeColor=")
                        .concat(themeColor, "&items=")
                        .concat(items);
                    test.appendChild(a);
                });
            });

    </script>

</body>

</html>
